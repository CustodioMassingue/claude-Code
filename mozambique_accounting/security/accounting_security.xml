<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Security Groups -->
    <record id="group_moz_accounting_user" model="res.groups">
        <field name="name">Mozambique Accounting User</field>
        <field name="category_id" ref="base.module_category_accounting_accounting"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_moz_accounting_manager" model="res.groups">
        <field name="name">Mozambique Accounting Manager</field>
        <field name="category_id" ref="base.module_category_accounting_accounting"/>
        <field name="implied_ids" eval="[(4, ref('group_moz_accounting_user'))]"/>
        <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
    </record>

    <record id="group_moz_accounting_auditor" model="res.groups">
        <field name="name">Mozambique Accounting Auditor</field>
        <field name="category_id" ref="base.module_category_accounting_accounting"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Record Rules -->
    
    <!-- Invoice Rules -->
    <record id="moz_invoice_company_rule" model="ir.rule">
        <field name="name">Invoice: multi-company</field>
        <field name="model_id" ref="model_moz_invoice"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <record id="moz_invoice_line_company_rule" model="ir.rule">
        <field name="name">Invoice Line: multi-company</field>
        <field name="model_id" ref="model_moz_invoice_line"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <!-- Bank Statement Rules -->
    <record id="moz_bank_statement_company_rule" model="ir.rule">
        <field name="name">Bank Statement: multi-company</field>
        <field name="model_id" ref="model_moz_bank_statement"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <record id="moz_bank_statement_line_company_rule" model="ir.rule">
        <field name="name">Bank Statement Line: multi-company</field>
        <field name="model_id" ref="model_moz_bank_statement_line"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <!-- Asset Rules -->
    <record id="moz_asset_company_rule" model="ir.rule">
        <field name="name">Asset: multi-company</field>
        <field name="model_id" ref="model_moz_asset"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <record id="moz_asset_category_company_rule" model="ir.rule">
        <field name="name">Asset Category: multi-company</field>
        <field name="model_id" ref="model_moz_asset_category"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <!-- Analytic Rules -->
    <record id="moz_analytic_account_company_rule" model="ir.rule">
        <field name="name">Analytic Account: multi-company</field>
        <field name="model_id" ref="model_moz_analytic_account"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <record id="moz_analytic_line_company_rule" model="ir.rule">
        <field name="name">Analytic Line: multi-company</field>
        <field name="model_id" ref="model_moz_analytic_line"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <record id="moz_cost_center_company_rule" model="ir.rule">
        <field name="name">Cost Center: multi-company</field>
        <field name="model_id" ref="model_moz_cost_center"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>

    <!-- Certified Invoice Protection -->
    <record id="moz_invoice_certified_protection_rule" model="ir.rule">
        <field name="name">Certified Invoice: No Modification</field>
        <field name="model_id" ref="model_moz_invoice"/>
        <field name="domain_force">[('state', '!=', 'certified')]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
        <field name="groups" eval="[(4, ref('group_moz_accounting_user'))]"/>
    </record>

    <record id="moz_invoice_certified_readonly_rule" model="ir.rule">
        <field name="name">Certified Invoice: Read Only</field>
        <field name="model_id" ref="model_moz_invoice"/>
        <field name="domain_force">[('state', '=', 'certified')]</field>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
        <field name="groups" eval="[(4, ref('group_moz_accounting_user'))]"/>
    </record>
</odoo>