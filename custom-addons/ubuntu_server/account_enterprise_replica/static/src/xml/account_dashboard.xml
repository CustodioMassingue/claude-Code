<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="account_enterprise_replica.Dashboard">
        <div class="o_account_enterprise_dashboard">
            <!-- Control Panel -->
            <div class="dashboard-control-panel">
                <div class="control-group">
                    <select class="form-select" t-on-change="onPeriodChange">
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month" selected="selected">This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                    </select>
                    <button class="btn btn-primary" t-on-click="refreshDashboard">
                        <i class="fa fa-refresh"/> Refresh
                    </button>
                    <button class="btn btn-secondary" t-on-click="exportToExcel">
                        <i class="fa fa-file-excel-o"/> Export Excel
                    </button>
                    <button class="btn btn-secondary" t-on-click="exportToPDF">
                        <i class="fa fa-file-pdf-o"/> Export PDF
                    </button>
                </div>
            </div>
            
            <!-- Loading State -->
            <div t-if="state.isLoading" class="dashboard-loading">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            
            <!-- Dashboard Content -->
            <div t-else="" class="dashboard-content">
                <!-- KPI Cards Row -->
                <div class="row mb-3">
                    <div class="col-lg-3 col-md-6">
                        <div class="kpi-card bg-primary">
                            <div class="kpi-header">
                                <i class="fa fa-line-chart"/>
                                <span>Total Revenue</span>
                            </div>
                            <div class="kpi-value">
                                <t t-esc="formatCurrency(state.kpis.total_revenue)"/>
                            </div>
                            <div class="kpi-footer">
                                <span t-att-class="getKPIClass(state.kpis.revenue_trend)">
                                    <t t-esc="formatPercentage(state.kpis.revenue_growth)"/>
                                    <i t-att-class="getKPIIcon(state.kpis.revenue_trend)" class="fa"/>
                                </span>
                                <span> vs last period</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="kpi-card bg-success">
                            <div class="kpi-header">
                                <i class="fa fa-money"/>
                                <span>Net Profit</span>
                            </div>
                            <div class="kpi-value">
                                <t t-esc="formatCurrency(state.kpis.net_profit)"/>
                            </div>
                            <div class="kpi-footer">
                                <span>Margin: </span>
                                <t t-esc="formatPercentage(state.kpis.net_margin)"/>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="kpi-card bg-info">
                            <div class="kpi-header">
                                <i class="fa fa-bank"/>
                                <span>Cash Position</span>
                            </div>
                            <div class="kpi-value">
                                <t t-esc="formatCurrency(state.kpis.cash_position)"/>
                            </div>
                            <div class="kpi-footer">
                                <span>Operating CF: </span>
                                <t t-esc="formatCurrency(state.kpis.operating_cash_flow)"/>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="kpi-card bg-warning">
                            <div class="kpi-header">
                                <i class="fa fa-users"/>
                                <span>Receivables</span>
                            </div>
                            <div class="kpi-value">
                                <t t-esc="formatCurrency(state.kpis.accounts_receivable)"/>
                            </div>
                            <div class="kpi-footer">
                                <t t-esc="state.kpis.dso"/> days outstanding
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Charts Row -->
                <div class="row">
                    <div class="col-lg-6">
                        <div class="chart-container">
                            <div class="chart-header">Revenue Trend</div>
                            <div class="chart-body">
                                <canvas id="revenueChart"/>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6">
                        <div class="chart-container">
                            <div class="chart-header">Expense Breakdown</div>
                            <div class="chart-body">
                                <canvas id="expenseChart"/>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-12">
                        <div class="chart-container">
                            <div class="chart-header">Cash Flow Analysis</div>
                            <div class="chart-body">
                                <canvas id="cashFlowChart"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>